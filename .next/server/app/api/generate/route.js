(()=>{var e={};e.id=8290,e.ids=[8290],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},85807:e=>{"use strict";e.exports=require("module")},60986:(e,t,n)=>{"use strict";n.r(t),n.d(t,{originalPathname:()=>m,patchFetch:()=>g,requestAsyncStorage:()=>h,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>p});var r={};n.r(r),n.d(r,{POST:()=>c});var i=n(49303),o=n(88716),s=n(60670),a=n(87070),l=n(15886),u=n(98586);async function c(e){try{let{email:t,tenantName:n,tenantAddress:r,tenantCity:i,propertyAddress:o,netRent:s,referenceRate:c,contractDate:d,landlordName:h,landlordAddress:p,landlordCity:f}=await e.json();if(!t||!n||!o||!s||!h)return a.NextResponse.json({error:"Alle Pflichtfelder m\xfcssen ausgef\xfcllt werden"},{status:400});let m=(0,u.b1)({currentRent:parseFloat(s),currentReferenceRate:parseFloat(c),newReferenceRate:(0,u.KT)(),contractDate:new Date(d)}),g=function(){let e=new Date,t=e.getFullYear();e.getMonth();let n=[new Date(t,2,31),new Date(t,5,30),new Date(t,8,30),new Date(t,11,31)],r=new Date(e);for(let e of(r.setMonth(r.getMonth()+3),n))if(e>r)return e.toLocaleDateString("de-CH",{year:"numeric",month:"long",day:"numeric"});return new Date(t+1,2,31).toLocaleDateString("de-CH",{year:"numeric",month:"long",day:"numeric"})}(),x={tenant:{name:n,address:r,city:i},landlord:{name:h,address:p,city:f},contract:{address:o,contractDate:d,currentRent:parseFloat(s),referenceRate:parseFloat(c)},calculation:{newRent:m.newRent,netReduction:m.netReduction,yearlySavings:m.yearlySavings},nextTerminationDate:g},y=(0,l.p)(x);return new a.NextResponse(Buffer.from(y),{headers:{"Content-Type":"application/pdf","Content-Disposition":'attachment; filename="herabsetzungsbegehren.pdf"'}})}catch(e){return console.error("Document generation error:",e),a.NextResponse.json({error:"Fehler bei der Dokument-Generierung: "+e.message},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/generate/route",pathname:"/api/generate",filename:"route",bundlePath:"app/api/generate/route"},resolvedPagePath:"D:\\STTH\\2026 KI\\mietcheck\\src\\app\\api\\generate\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:h,staticGenerationAsyncStorage:p,serverHooks:f}=d,m="/api/generate/route";function g(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:p})}},79925:e=>{"use strict";var t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,o={};function s(e){var t;let n=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),r=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===n.length?r:`${r}; ${n.join("; ")}`}function a(e){let t=new Map;for(let n of e.split(/; */)){if(!n)continue;let e=n.indexOf("=");if(-1===e){t.set(n,"true");continue}let[r,i]=[n.slice(0,e),n.slice(e+1)];try{t.set(r,decodeURIComponent(null!=i?i:"true"))}catch{}}return t}function l(e){var t,n;if(!e)return;let[[r,i],...o]=a(e),{domain:s,expires:l,httponly:d,maxage:h,path:p,samesite:f,secure:m,partitioned:g,priority:x}=Object.fromEntries(o.map(([e,t])=>[e.toLowerCase(),t]));return function(e){let t={};for(let n in e)e[n]&&(t[n]=e[n]);return t}({name:r,value:decodeURIComponent(i),domain:s,...l&&{expires:new Date(l)},...d&&{httpOnly:!0},..."string"==typeof h&&{maxAge:Number(h)},path:p,...f&&{sameSite:u.includes(t=(t=f).toLowerCase())?t:void 0},...m&&{secure:!0},...x&&{priority:c.includes(n=(n=x).toLowerCase())?n:void 0},...g&&{partitioned:!0}})}((e,n)=>{for(var r in n)t(e,r,{get:n[r],enumerable:!0})})(o,{RequestCookies:()=>d,ResponseCookies:()=>h,parseCookie:()=>a,parseSetCookie:()=>l,stringifyCookie:()=>s}),e.exports=((e,o,s,a)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let s of r(o))i.call(e,s)||void 0===s||t(e,s,{get:()=>o[s],enumerable:!(a=n(o,s))||a.enumerable});return e})(t({},"__esModule",{value:!0}),o);var u=["strict","lax","none"],c=["low","medium","high"],d=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t)for(let[e,n]of a(t))this._parsed.set(e,{name:e,value:n})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let n=Array.from(this._parsed);if(!e.length)return n.map(([e,t])=>t);let r="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return n.filter(([e])=>e===r).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,n]=1===e.length?[e[0].name,e[0].value]:e,r=this._parsed;return r.set(t,{name:t,value:n}),this._headers.set("cookie",Array.from(r).map(([e,t])=>s(t)).join("; ")),this}delete(e){let t=this._parsed,n=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>s(t)).join("; ")),n}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},h=class{constructor(e){var t,n,r;this._parsed=new Map,this._headers=e;let i=null!=(r=null!=(n=null==(t=e.getSetCookie)?void 0:t.call(e))?n:e.get("set-cookie"))?r:[];for(let e of Array.isArray(i)?i:function(e){if(!e)return[];var t,n,r,i,o,s=[],a=0;function l(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,o=!1;l();)if(","===(n=e.charAt(a))){for(r=a,a+=1,l(),i=a;a<e.length&&"="!==(n=e.charAt(a))&&";"!==n&&","!==n;)a+=1;a<e.length&&"="===e.charAt(a)?(o=!0,a=i,s.push(e.substring(t,r)),t=a):a=r+1}else a+=1;(!o||a>=e.length)&&s.push(e.substring(t,e.length))}return s}(i)){let t=l(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let n=Array.from(this._parsed.values());if(!e.length)return n;let r="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return n.filter(e=>e.name===r)}has(e){return this._parsed.has(e)}set(...e){let[t,n,r]=1===e.length?[e[0].name,e[0].value,e[0]]:e,i=this._parsed;return i.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:n,...r})),function(e,t){for(let[,n]of(t.delete("set-cookie"),e)){let e=s(n);t.append("set-cookie",e)}}(i,this._headers),this}delete(...e){let[t,n,r]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:t,path:n,domain:r,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(s).join("; ")}}},38238:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return n}});class n{static get(e,t,n){let r=Reflect.get(e,t,n);return"function"==typeof r?r.bind(e):r}static set(e,t,n,r){return Reflect.set(e,t,n,r)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},92044:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{RequestCookies:function(){return r.RequestCookies},ResponseCookies:function(){return r.ResponseCookies},stringifyCookie:function(){return r.stringifyCookie}});let r=n(79925)},98586:(e,t,n)=>{"use strict";function r(e){let{currentRent:t,currentReferenceRate:n,newReferenceRate:r,contractDate:i}=e,o=n-r,s=0;.25===o?s=2.91:.5===o?s=5.82:.75===o&&(s=8.73);let a=s/100*t,l=(new Date().getTime()-i.getTime())/31536e6,u=Math.min(2*l,5),c=u/100*t*.4,d=.5*l/100*t,h=Math.max(0,a-c-d),p=t-h,f=12*h,m=[`Basis-Reduktion bei ${o}% Zinssenkung: ${s.toFixed(2)}%`,`Brutto-Reduktion: CHF ${a.toFixed(2)}`,`Abz\xfcglich 40% Teuerung (${u.toFixed(1)}%): CHF ${c.toFixed(2)}`,`Abz\xfcglich allgemeine Kostensteigerung: CHF ${d.toFixed(2)}`,`Netto-Reduktion pro Monat: CHF ${h.toFixed(2)}`,`Neue Nettomiete: CHF ${p.toFixed(2)}`,`J\xe4hrliche Ersparnis: CHF ${f.toFixed(2)}`];return{reductionPercentage:s,grossReduction:Math.round(100*a)/100,inflationOffset:Math.round(100*c)/100,costIncreaseOffset:Math.round(100*d)/100,netReduction:Math.round(100*h)/100,newRent:Math.round(100*p)/100,yearlySavings:Math.round(100*f)/100,details:m}}function i(){return 1.25}n.d(t,{KT:()=>i,b1:()=>r})},15886:(e,t,n)=>{"use strict";n.d(t,{p:()=>o});var r=n(51933);let i=[{datum:"02.09.2025",satz:1.25},{datum:"03.03.2025",satz:1.5},{datum:"01.12.2023",satz:1.75},{datum:"01.06.2023",satz:1.5},{datum:"01.12.2022",satz:1.25}];function o(e){let t=new r.ZP({orientation:"portrait",unit:"mm",format:"a4"}),n=20;t.setFontSize(10),t.setFont("helvetica","normal"),t.text(e.tenant.name,25,n),n+=5,t.text(e.tenant.address,25,n),n+=5,t.text(e.tenant.city,25,n),n+=20,t.text(e.landlord.name,120,n),n+=5,t.text(e.landlord.address,120,n),n+=5,t.text(e.landlord.city,120,n),n+=20,t.setFont("helvetica","bold"),t.text("Per Einschreiben (A-Post Plus)",25,n),t.setFont("helvetica","normal"),n+=15;let o=new Date().toLocaleDateString("de-CH",{year:"numeric",month:"long",day:"numeric"});for(let r of(t.text(`${e.tenant.city.split(" ").slice(1).join(" ")}, ${o}`,25,n),n+=15,t.setFontSize(11),t.setFont("helvetica","bold"),t.text("Betreff: Herabsetzungsbegehren gem\xe4ss Art. 270a OR",25,n),n+=5,t.setFontSize(10),t.setFont("helvetica","normal"),t.text(`Mietobjekt: ${e.contract.address}`,25,n),n+=12,t.text("Sehr geehrte Damen und Herren",25,n),n+=10,[`Gest\xfctzt auf Art. 270a OR und Art. 13 VMWG beantrage ich hiermit die Herabsetzung des Nettomietzinses f\xfcr die oben genannte Wohnung.`,"","1. Ausgangslage",`Bei Abschluss des Mietvertrages vom ${function(e){try{return new Date(e).toLocaleDateString("de-CH",{year:"numeric",month:"long",day:"numeric"})}catch{return e}}(e.contract.contractDate)} betrug der hypothekarische Referenzzinssatz ${e.contract.referenceRate}%. Das Bundesamt f\xfcr Wohnungswesen (BWO) hat den Referenzzinssatz per 02. September 2025 auf 1.25% gesenkt.`,"","2. Rechtliche Grundlage",`Gem\xe4ss Art. 13 Abs. 1 VMWG berechtigt eine Senkung des Referenzzinssatzes um 0.25 Prozentpunkte zu einer Mietzinsreduktion von 2.91% des Nettomietzinses (bei einem Zinssatz unter 5%).`])){if(n>260&&(t.addPage(),n=20),""===r){n+=3;continue}r.startsWith("1.")||r.startsWith("2.")||r.startsWith("3.")||r.startsWith("4.")?t.setFont("helvetica","bold"):t.setFont("helvetica","normal");let e=t.splitTextToSize(r,165);t.text(e,25,n),n+=5*e.length}(n+=5)>220&&(t.addPage(),n=20),t.setFont("helvetica","bold"),t.text("3. Berechnung",25,n),n+=7,t.setDrawColor(200,200,200),t.setFillColor(248,248,248),t.roundedRect(25,n,165,45,2,2,"FD"),n+=6,t.setFont("helvetica","normal"),t.setFontSize(9);let s=Math.round((e.contract.referenceRate-1.25)/.25),a=2.91*s;for(let r of[`Referenzzinssatz bei Vertragsabschluss: ${e.contract.referenceRate}%`,"Aktueller Referenzzinssatz (seit 02.09.2025): 1.25%",`Zinssenkung: ${(e.contract.referenceRate-1.25).toFixed(2)}% (${s} \xd7 0.25%)`,`Mietzinsreduktion: ${s} \xd7 2.91% = ${a.toFixed(2)}%`,"",`Aktueller Nettomietzins: CHF ${e.contract.currentRent.toFixed(2)}`,`Reduktion: CHF ${e.calculation.netReduction.toFixed(2)} (${a.toFixed(2)}%)`,`Neuer Nettomietzins: CHF ${e.calculation.newRent.toFixed(2)}`]){if(""===r){n+=2;continue}t.text(r,30,n),n+=4.5}for(let r of(n+=10,t.setFontSize(10),t.setFont("helvetica","bold"),t.text("4. Antrag",25,n),n+=7,t.setFont("helvetica","normal"),[`Ich beantrage hiermit die Herabsetzung des monatlichen Nettomietzinses von CHF ${e.contract.currentRent.toFixed(2)} auf CHF ${e.calculation.newRent.toFixed(2)} per ${e.nextTerminationDate}.`,"",`Dies entspricht einer j\xe4hrlichen Ersparnis von CHF ${e.calculation.yearlySavings.toFixed(2)}.`,"",`Ich bitte Sie, mir die Herabsetzung innert 30 Tagen schriftlich auf dem amtlichen Formular zu best\xe4tigen.`,"",`Sollten Sie meinem Begehren nicht entsprechen oder innert dieser Frist nicht antworten, werde ich mich gem\xe4ss Art. 270b OR an die zust\xe4ndige Schlichtungsbeh\xf6rde wenden.`])){if(n>260&&(t.addPage(),n=20),""===r){n+=3;continue}let e=t.splitTextToSize(r,165);t.text(e,25,n),n+=5*e.length}for(let r of(n+=10,t.text("Freundliche Gr\xfcsse",25,n),n+=20,t.setDrawColor(150,150,150),t.line(25,n,85,n),n+=5,t.setFontSize(9),t.text(e.tenant.name,25,n),n+=4,t.text("(Handschriftliche Unterschrift)",25,n),n+=15,t.setFontSize(10),t.setFont("helvetica","bold"),t.text("Beilagen:",25,n),n+=5,t.setFont("helvetica","normal"),t.setFontSize(9),t.text("- Kopie des Mietvertrages (empfohlen)",25,n),n+=4,t.text("- Referenzzinssatz-Bekanntmachung BWO (empfohlen)",25,n),t.addPage(),n=20,t.setFontSize(14),t.setFont("helvetica","bold"),t.text("Beilage: Referenzzinssatz-Historie und Versandanleitung",25,n),n+=15,t.setFontSize(11),t.text("Hypothekarischer Referenzzinssatz (BWO)",25,n),n+=8,t.setFillColor(240,240,240),t.rect(25,n,80,7,"F"),t.setFontSize(9),t.setFont("helvetica","bold"),t.text("G\xfcltig ab",30,n+5),t.text("Referenzzinssatz",70,n+5),n+=7,t.setFont("helvetica","normal"),i))1.25===r.satz&&"02.09.2025"===r.datum&&(t.setFillColor(220,252,231),t.rect(25,n,80,6,"F")),t.text(r.datum,30,n+4),t.text(`${r.satz.toFixed(2)}%`,70,n+4),n+=6;for(let e of(t.setFontSize(8),t.setTextColor(100,100,100),t.text("Quelle: Bundesamt f\xfcr Wohnungswesen (BWO)",25,n+5),t.setTextColor(0,0,0),n+=20,t.setFontSize(11),t.setFont("helvetica","bold"),t.text("Versandanleitung",25,n),n+=10,t.setFontSize(10),t.setFont("helvetica","normal"),["1. Brief ausdrucken","   Drucken Sie dieses Dokument auf weissem A4-Papier aus.","","2. Handschriftlich unterschreiben","   Unterschreiben Sie den Brief im vorgesehenen Feld mit Kugelschreiber.","","3. Per Einschreiben versenden (A-Post Plus)","   Senden Sie den Brief als Einschreiben an Ihren Vermieter.","   Wichtig: Bewahren Sie den Einlieferungsbeleg auf!","","4. Frist abwarten","   Der Vermieter hat 30 Tage Zeit, Ihnen auf dem amtlichen Formular","   zu antworten.","","5. Bei Ablehnung oder Nichtantwort","   Wenden Sie sich an die Schlichtungsbeh\xf6rde Ihres Bezirks.","   Das Verfahren ist in der Regel kostenlos."])){if(""===e){n+=3;continue}e.match(/^\d\./)?t.setFont("helvetica","bold"):t.setFont("helvetica","normal"),t.text(e,25,n),n+=5}n+=10,t.setFillColor(254,243,199),t.roundedRect(25,n,165,25,2,2,"F"),n+=6,t.setFont("helvetica","bold"),t.setFontSize(9),t.text("Wichtiger Hinweis:",30,n),n+=5,t.setFont("helvetica","normal");let l=t.splitTextToSize("Dieses Dokument wurde automatisch erstellt und ersetzt keine Rechtsberatung. Bei komplexen F\xe4llen oder Unsicherheiten empfehlen wir die Konsultation eines Mieterschutzverbandes oder einer Rechtsberatung.",155);return t.text(l,30,n),n=282,t.setFontSize(8),t.setTextColor(150,150,150),t.text("Erstellt mit MietCheck.ch - Ihr Helfer f\xfcr faire Mieten",25,n),t.text(`Generiert am: ${o}`,140,n),new Uint8Array(t.output("arraybuffer"))}},73897:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[8948,5972,1933],()=>n(60986));module.exports=r})();