(()=>{var e={};e.id=478,e.ids=[478],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},43e3:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>o,pages:()=>m,routeModule:()=>x,tree:()=>d}),r(75187),r(15495),r(35866);var t=r(23191),n=r(88716),a=r(37922),i=r.n(a),l=r(95231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);r.d(s,c);let d=["",{children:["payment",{children:["success",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,75187)),"D:\\STTH\\2026 KI\\mietcheck\\src\\app\\payment\\success\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,15495)),"D:\\STTH\\2026 KI\\mietcheck\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],m=["D:\\STTH\\2026 KI\\mietcheck\\src\\app\\payment\\success\\page.tsx"],o="/payment/success/page",h={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/payment/success/page",pathname:"/payment/success",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},68896:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},40721:(e,s,r)=>{Promise.resolve().then(r.bind(r,42126))},68214:(e,s,r)=>{Promise.resolve().then(r.bind(r,16829))},35047:(e,s,r)=>{"use strict";var t=r(77389);r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})},16829:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>d});var t=r(10326),n=r(17577),a=r(35047),i=r(90434);function l(){let e=(0,a.useSearchParams)();e.get("session_id");let s=e.get("service")||"generate",[r,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null),[m,o]=(0,n.useState)(!1),[h,x]=(0,n.useState)(null),[u,p]=(0,n.useState)(null);async function f(e){if(e){o(!0);try{let s={email:e.email||"",tenantName:e.tenantName||"",tenantAddress:e.tenantAddress||"",tenantCity:e.tenantCity||"",propertyAddress:e.propertyAddress||"",netRent:e.netRent||"",newRent:e.newRent||"",monthlyReduction:e.monthlyReduction||"",referenceRate:e.referenceRate||"",contractDate:e.contractDate||"",landlordName:e.landlordName||"",landlordAddress:e.landlordAddress||"",landlordCity:e.landlordCity||""},r=await fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok)throw Error("PDF generation failed");let t=await r.blob(),n=window.URL.createObjectURL(t);x(n)}catch(e){console.error("PDF generation error:",e),p("PDF konnte nicht generiert werden. Bitte kontaktieren Sie den Support.")}finally{o(!1)}}}return r?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Zahlung wird verifiziert..."})]})}):u||!c?.verified?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white shadow-sm",children:t.jsx("nav",{className:"container mx-auto px-4 py-4",children:t.jsx(i.default,{href:"/",className:"text-2xl font-bold text-primary",children:"MietCheck.ch"})})}),t.jsx("main",{className:"container mx-auto px-4 py-12",children:t.jsx("div",{className:"max-w-xl mx-auto",children:(0,t.jsxs)("div",{className:"card text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),t.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Zahlung konnte nicht verifiziert werden"}),t.jsx("p",{className:"text-gray-600 mb-6",children:u||c?.error||"Die Zahlung wurde nicht abgeschlossen."}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx(i.default,{href:"/generate",className:"btn btn-primary w-full",children:"Zur\xfcck zur Dokumenterstellung"}),t.jsx(i.default,{href:"/",className:"btn btn-outline w-full",children:"Zur Startseite"})]})]})})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white shadow-sm",children:t.jsx("nav",{className:"container mx-auto px-4 py-4",children:t.jsx(i.default,{href:"/",className:"text-2xl font-bold text-primary",children:"MietCheck.ch"})})}),t.jsx("main",{className:"container mx-auto px-4 py-12",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[t.jsx("div",{className:"card mb-8",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:"✅"}),t.jsx("h1",{className:"text-3xl font-bold text-green-600 mb-2",children:"Zahlung erfolgreich!"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Vielen Dank f\xfcr Ihren Kauf. Ihre Quittung wird an ",c.session?.customerEmail," gesendet."]})]})}),"generate"===s&&(0,t.jsxs)("div",{className:"card mb-8",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Ihr Herabsetzungsbegehren"}),m?(0,t.jsxs)("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"PDF wird generiert..."})]}):h?(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:t.jsx("p",{className:"text-green-800 font-medium",children:"✓ Ihr Dokument ist bereit zum Download"})}),t.jsx("a",{href:h,download:"herabsetzungsbegehren.pdf",className:"btn btn-primary w-full text-center text-lg block",children:"\uD83D\uDCC4 PDF herunterladen"}),t.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Sie k\xf6nnen das PDF jederzeit erneut herunterladen, solange diese Seite ge\xf6ffnet ist."})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-gray-600 mb-4",children:"PDF konnte nicht automatisch generiert werden."}),t.jsx("button",{onClick:()=>f(c.session?.metadata),className:"btn btn-primary",children:"PDF erneut generieren"})]})]}),(0,t.jsxs)("div",{className:"card",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"N\xe4chste Schritte"}),(0,t.jsxs)("ol",{className:"space-y-4",children:[(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("span",{className:"bg-primary text-white w-8 h-8 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:"1"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"PDF ausdrucken"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Drucken Sie das Dokument auf weissem A4-Papier aus."})]})]}),(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("span",{className:"bg-primary text-white w-8 h-8 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:"2"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"Unterschreiben"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Unterschreiben Sie den Brief handschriftlich im vorgesehenen Feld."})]})]}),(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("span",{className:"bg-primary text-white w-8 h-8 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:"3"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"Per Einschreiben versenden"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Senden Sie den Brief als Einschreiben (A-Post Plus) an Ihren Vermieter. Bewahren Sie den Einlieferungsbeleg auf!"})]})]}),(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("span",{className:"bg-primary text-white w-8 h-8 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:"4"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"30 Tage warten"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Ihr Vermieter hat 30 Tage Zeit, Ihnen auf dem amtlichen Formular zu antworten."})]})]}),(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("span",{className:"bg-primary text-white w-8 h-8 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:"5"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:"Bei Ablehnung: Schlichtungsbeh\xf6rde"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Falls Ihr Vermieter nicht antwortet oder ablehnt, k\xf6nnen Sie sich kostenlos an die Schlichtungsbeh\xf6rde Ihres Bezirks wenden."})]})]})]})]}),t.jsx("div",{className:"mt-8 text-center",children:(0,t.jsxs)("p",{className:"text-gray-600",children:["Fragen? Kontaktieren Sie uns unter"," ",t.jsx("a",{href:"mailto:support@mietcheck.ch",className:"text-primary hover:underline",children:"support@mietcheck.ch"})]})})]})})]})}function c(){return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Laden..."})]})})}function d(){return t.jsx(n.Suspense,{fallback:t.jsx(c,{}),children:t.jsx(l,{})})}},42126:(e,s,r)=>{"use strict";r.d(s,{Providers:()=>i});var t=r(10326),n=r(77109),a=r(40381);function i({children:e}){return(0,t.jsxs)(n.SessionProvider,{children:[e,t.jsx(a.x7,{position:"top-center",reverseOrder:!1,gutter:8,toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff",padding:"16px",borderRadius:"8px"},success:{duration:3e3,style:{background:"#10B981"},iconTheme:{primary:"#fff",secondary:"#10B981"}},error:{duration:5e3,style:{background:"#EF4444"},iconTheme:{primary:"#fff",secondary:"#EF4444"}},loading:{style:{background:"#3B82F6"}}}})]})}},15495:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>c,metadata:()=>l});var t=r(19510),n=r(25384),a=r.n(n);r(5023);let i=(0,r(68570).createProxy)(String.raw`D:\STTH\2026 KI\mietcheck\src\app\providers.tsx#Providers`),l={title:"MietCheck.ch - Miete senken in 3 Minuten",description:"Automatischer Mietminderungs-Service f\xfcr die Schweiz. Sparen Sie CHF 300-700 pro Jahr."};function c({children:e}){return t.jsx("html",{lang:"de",children:t.jsx("body",{className:a().className,children:t.jsx(i,{children:e})})})}},75187:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`D:\STTH\2026 KI\mietcheck\src\app\payment\success\page.tsx#default`)},5023:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[948,541,434],()=>r(43e3));module.exports=t})();