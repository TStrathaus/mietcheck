(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{5572:function(e,t,s){Promise.resolve().then(s.bind(s,3492))},3492:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var l=s(7437),n=s(2265),a=s(7648);function r(){let[e,t]=(0,n.useState)(!1),[s,r]=(0,n.useState)(""),[i,d]=(0,n.useState)(!1),[c,o]=(0,n.useState)({email:"",tenantName:"",tenantAddress:"",tenantCity:"",propertyAddress:"",netRent:"",newRent:"",monthlyReduction:"",referenceRate:"",contractDate:"",landlordName:"",landlordAddress:"",landlordCity:""});(0,n.useEffect)(()=>{if(window.sessionStorage){let t=sessionStorage.getItem("mietCheckData");if(t)try{var e;let s=JSON.parse(t);console.log("\uD83D\uDCE5 Loading data from Service 1:",s);let l=function(e){if(!e)return{street:"",city:""};let t=e.split(",");if(t.length>=2)return{street:t[0].trim(),city:t.slice(1).join(",").trim()};let s=e.match(/^(.*?)(\d{4}\s+.+)$/);return s?{street:s[1].trim().replace(/,$/,""),city:s[2].trim()}:{street:e.trim(),city:""}}((null===(e=s.contract)||void 0===e?void 0:e.landlordAddress)||"");o(e=>{var t,n,a,r,i,d,c,o,h,m,u;return{...e,propertyAddress:(null===(t=s.contract)||void 0===t?void 0:t.address)||"",netRent:(null===(a=s.contract)||void 0===a?void 0:null===(n=a.netRent)||void 0===n?void 0:n.toString())||"",newRent:(null===(i=s.calculation)||void 0===i?void 0:null===(r=i.newRent)||void 0===r?void 0:r.toFixed(2))||"",monthlyReduction:(null===(c=s.calculation)||void 0===c?void 0:null===(d=c.monthlyReduction)||void 0===d?void 0:d.toFixed(2))||"",referenceRate:(null===(h=s.contract)||void 0===h?void 0:null===(o=h.referenceRate)||void 0===o?void 0:o.toString())||"",contractDate:(null===(m=s.contract)||void 0===m?void 0:m.contractDate)||"",landlordName:(null===(u=s.contract)||void 0===u?void 0:u.landlordName)||"",landlordAddress:l.street,landlordCity:l.city}}),d(!0),console.log("✅ Auto-filled form from Service 1")}catch(e){console.error("❌ Error loading Service 1 data:",e)}}},[]);let h=async()=>{let e=await fetch("/api/create-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:"generate",amount:5e3,email:c.email,metadata:c})}),{url:t}=await e.json();window.location.href=t},m=async e=>{e.preventDefault(),t(!0);try{let e=await fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),t=await e.blob(),s=window.URL.createObjectURL(t);r(s)}catch(e){alert("Fehler beim Generieren des Dokuments")}finally{t(!1)}};return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)("header",{className:"bg-white shadow-sm",children:(0,l.jsx)("nav",{className:"container mx-auto px-4 py-4",children:(0,l.jsx)(a.default,{href:"/",className:"text-2xl font-bold text-primary",children:"MietCheck.ch"})})}),(0,l.jsx)("main",{className:"container mx-auto px-4 py-12",children:(0,l.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,l.jsxs)("div",{className:"card mb-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Service 2: Dokument-Erstellung"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Rechtssicheres Herabsetzungsbegehren - fertig zum Versand"}),i&&(0,l.jsx)("p",{className:"text-sm text-green-600 mt-2",children:"✓ Daten automatisch aus Service 1 \xfcbernommen"})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-primary",children:"CHF 50"}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"einmalig"})]})]}),s?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-green-50 border-2 border-green-500 p-6 rounded-lg text-center",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"✅"}),(0,l.jsx)("h3",{className:"text-2xl font-bold text-green-800 mb-2",children:"Dokument erfolgreich erstellt!"}),(0,l.jsx)("p",{className:"text-gray-700",children:"Dein rechtssicheres Herabsetzungsbegehren ist bereit."})]}),(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)("a",{href:s,download:"herabsetzungsbegehren.pdf",className:"btn btn-primary inline-block text-lg",children:"\uD83D\uDCC4 PDF herunterladen"})}),(0,l.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold mb-3",children:"N\xe4chste Schritte:"}),(0,l.jsxs)("ol",{className:"space-y-2 text-sm text-gray-700",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"1."})," PDF ausdrucken & unterschreiben"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"2."})," Per Einschreiben (A-Post Plus) an Vermieter senden"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"3."})," 30 Tage auf Antwort warten"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"4."})," Bei Ablehnung: Schlichtungsbeh\xf6rde kontaktieren"]})]})]})]}):(0,l.jsxs)("form",{onSubmit:m,className:"space-y-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,l.jsx)("span",{className:"bg-primary text-white w-8 h-8 rounded-full flex items-center justify-center mr-2",children:"1"}),"Deine Daten"]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"label",children:"E-Mail *"}),(0,l.jsx)("input",{type:"email",required:!0,className:"input",value:c.email,onChange:e=>o({...c,email:e.target.value})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"label",children:"Dein Name *"}),(0,l.jsx)("input",{type:"text",required:!0,className:"input",value:c.tenantName,onChange:e=>o({...c,tenantName:e.target.value}),placeholder:"Max Muster"})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"label",children:"Deine Adresse *"}),(0,l.jsx)("input",{type:"text",required:!0,className:"input",value:c.tenantAddress,onChange:e=>o({...c,tenantAddress:e.target.value}),placeholder:"Musterstrasse 123"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"label",children:"PLZ & Ort *"}),(0,l.jsx)("input",{type:"text",required:!0,className:"input",value:c.tenantCity,onChange:e=>o({...c,tenantCity:e.target.value}),placeholder:"8000 Z\xfcrich"})]})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,l.jsx)("span",{className:"bg-primary text-white w-8 h-8 rounded-full flex items-center justify-center mr-2",children:"2"}),"Mietvertrag",i&&(0,l.jsx)("span",{className:"ml-2 text-sm text-green-600",children:"(automatisch ausgef\xfcllt)"})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"label",children:"Adresse der Mietwohnung *"}),(0,l.jsx)("input",{type:"text",required:!0,className:"input",value:c.propertyAddress,onChange:e=>o({...c,propertyAddress:e.target.value}),placeholder:"Wohnstrasse 456, 8000 Z\xfcrich"})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"label",children:"Aktuelle Miete (CHF) *"}),(0,l.jsx)("input",{type:"number",required:!0,step:"0.01",className:"input",value:c.netRent,onChange:e=>o({...c,netRent:e.target.value}),placeholder:"2000"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"label",children:"Neue Miete (CHF) *"}),(0,l.jsx)("input",{type:"number",required:!0,step:"0.01",className:"input bg-green-50",value:c.newRent,onChange:e=>o({...c,newRent:e.target.value}),placeholder:"1900"}),(0,l.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"Berechnete Sollmiete"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"label",children:"Referenzzinssatz *"}),(0,l.jsxs)("select",{required:!0,className:"input",value:c.referenceRate,onChange:e=>o({...c,referenceRate:e.target.value}),children:[(0,l.jsx)("option",{value:"",children:"W\xe4hlen"}),(0,l.jsx)("option",{value:"1.25",children:"1.25%"}),(0,l.jsx)("option",{value:"1.50",children:"1.50%"}),(0,l.jsx)("option",{value:"1.75",children:"1.75%"}),(0,l.jsx)("option",{value:"2.00",children:"2.00%"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"label",children:"Vertragsdatum *"}),(0,l.jsx)("input",{type:"date",required:!0,className:"input",value:c.contractDate,onChange:e=>o({...c,contractDate:e.target.value})})]})]}),c.monthlyReduction&&parseFloat(c.monthlyReduction)>0&&(0,l.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,l.jsxs)("p",{className:"text-sm font-medium text-green-800",children:["\uD83D\uDCB0 Monatliche Einsparung: CHF ",parseFloat(c.monthlyReduction).toFixed(2)]}),(0,l.jsxs)("p",{className:"text-sm text-green-600",children:["J\xe4hrlich: CHF ",(12*parseFloat(c.monthlyReduction)).toFixed(2)]})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,l.jsx)("span",{className:"bg-primary text-white w-8 h-8 rounded-full flex items-center justify-center mr-2",children:"3"}),"Vermieter",i&&(0,l.jsx)("span",{className:"ml-2 text-sm text-green-600",children:"(automatisch ausgef\xfcllt)"})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"label",children:"Name des Vermieters *"}),(0,l.jsx)("input",{type:"text",required:!0,className:"input",value:c.landlordName,onChange:e=>o({...c,landlordName:e.target.value}),placeholder:"Immobilien AG"})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"label",children:"Adresse *"}),(0,l.jsx)("input",{type:"text",required:!0,className:"input",value:c.landlordAddress,onChange:e=>o({...c,landlordAddress:e.target.value}),placeholder:"Hausverwaltung 1"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"label",children:"PLZ & Ort *"}),(0,l.jsx)("input",{type:"text",required:!0,className:"input",value:c.landlordCity,onChange:e=>o({...c,landlordCity:e.target.value}),placeholder:"8000 Z\xfcrich"})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-green-50 border border-green-200 p-6 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold mb-3",children:"Was du erh\xe4ltst:"}),(0,l.jsxs)("ul",{className:"space-y-2 text-sm text-gray-700",children:[(0,l.jsx)("li",{children:"✓ Alle Funktionen von Service 1 (Analyse)"}),(0,l.jsx)("li",{children:"✓ Fertiges Herabsetzungsbegehren als PDF"}),(0,l.jsx)("li",{children:"✓ Rechtssicher nach Art. 13 VMWG"}),(0,l.jsx)("li",{children:"✓ Personalisiert mit all deinen Daten"}),(0,l.jsx)("li",{children:"✓ Bereit zum Ausdrucken & Versenden"}),(0,l.jsx)("li",{children:"✓ Anleitung f\xfcr Einschreiben-Versand"})]})]}),(0,l.jsx)("button",{type:"button",onClick:h,className:"btn btn-primary w-full text-lg",children:"Jetzt f\xfcr CHF 50 Dokument erstellen →"})]})]})})})]})}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=5572)}),_N_E=e.O()}]);