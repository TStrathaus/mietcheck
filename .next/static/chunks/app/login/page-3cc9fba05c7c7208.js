(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{2562:function(e,r,s){Promise.resolve().then(s.bind(s,8991))},7648:function(e,r,s){"use strict";s.d(r,{default:function(){return n.a}});var t=s(2972),n=s.n(t)},9376:function(e,r,s){"use strict";var t=s(5475);s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(r,{useSearchParams:function(){return t.useSearchParams}})},8991:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return o}});var t=s(7437),n=s(2265),a=s(605),l=s(9376),i=s(7648);function o(){let e=(0,l.useRouter)(),[r,s]=(0,n.useState)(!0),[o,d]=(0,n.useState)(!1),[u,c]=(0,n.useState)(null),[m,h]=(0,n.useState)(null),[g,b]=(0,n.useState)({email:"",password:"",name:"",confirmPassword:""}),x=e=>{b({...g,[e.target.name]:e.target.value}),c(null)},f=async r=>{r.preventDefault(),d(!0),c(null);try{let r=await (0,a.signIn)("credentials",{redirect:!1,email:g.email,password:g.password});(null==r?void 0:r.error)?c(r.error):(e.push("/dashboard"),e.refresh())}catch(e){c("Login fehlgeschlagen. Bitte versuchen Sie es erneut.")}finally{d(!1)}},p=async r=>{if(r.preventDefault(),d(!0),c(null),h(null),g.password!==g.confirmPassword){c("Passw\xf6rter stimmen nicht \xfcberein"),d(!1);return}if(g.password.length<8){c("Passwort muss mindestens 8 Zeichen lang sein"),d(!1);return}try{let r=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g.email,password:g.password,name:g.name})}),s=await r.json();if(!r.ok)throw Error(s.error||"Registrierung fehlgeschlagen");h("Konto erfolgreich erstellt! Sie werden eingeloggt..."),setTimeout(async()=>{await (0,a.signIn)("credentials",{redirect:!1,email:g.email,password:g.password}),e.push("/dashboard")},1500)}catch(e){c(e instanceof Error?e.message:"Registrierung fehlgeschlagen")}finally{d(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white py-12 px-4",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,t.jsx)(i.default,{href:"/",className:"text-blue-600 hover:text-blue-700 mb-6 inline-block",children:"← Zur\xfcck zur Startseite"}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:r?"\uD83D\uDD10 Anmelden":"\uD83D\uDCDD Registrieren"}),(0,t.jsx)("p",{className:"text-gray-600",children:r?"Melden Sie sich an, um Ihr Dashboard zu \xf6ffnen":"Erstellen Sie ein kostenloses Konto"})]}),(0,t.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,t.jsx)("button",{onClick:()=>{s(!0),c(null),h(null)},className:"flex-1 py-2 rounded-lg font-medium transition-colors ".concat(r?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Anmelden"}),(0,t.jsx)("button",{onClick:()=>{s(!1),c(null),h(null)},className:"flex-1 py-2 rounded-lg font-medium transition-colors ".concat(r?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-blue-600 text-white"),children:"Registrieren"})]}),(0,t.jsxs)("form",{onSubmit:r?f:p,className:"space-y-4",children:[!r&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),(0,t.jsx)("input",{type:"text",name:"name",value:g.name,onChange:x,placeholder:"Ihr Name",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,t.jsx)("input",{type:"email",name:"email",value:g.email,onChange:x,placeholder:"ihre@email.ch",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passwort"}),(0,t.jsx)("input",{type:"password",name:"password",value:g.password,onChange:x,placeholder:"••••••••",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),!r&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Mindestens 8 Zeichen"})]}),!r&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passwort best\xe4tigen"}),(0,t.jsx)("input",{type:"password",name:"confirmPassword",value:g.confirmPassword,onChange:x,placeholder:"••••••••",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),u&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,t.jsxs)("p",{className:"text-red-800 text-sm",children:["❌ ",u]})}),m&&(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:(0,t.jsxs)("p",{className:"text-green-800 text-sm",children:["✅ ",m]})}),(0,t.jsx)("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:o?"⏳ Wird verarbeitet...":r?"\uD83D\uDD13 Anmelden":"✨ Konto erstellen"})]}),r&&(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsx)("a",{href:"#",className:"text-sm text-blue-600 hover:text-blue-700",children:"Passwort vergessen?"})})]}),(0,t.jsx)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:["ℹ️ ",(0,t.jsx)("strong",{children:"Kostenlos registrieren:"})," Erhalten Sie Zugang zu Ihrem pers\xf6nlichen Dashboard und verwalten Sie Ihre Mietvertr\xe4ge und Services."]})})]})})}}},function(e){e.O(0,[972,605,971,117,744],function(){return e(e.s=2562)}),_N_E=e.O()}]);